---
import Layout from "./Layout.astro";

interface Props {
  title?: string;
}

const { title = "10x Cards" } = Astro.props;

// Sprawdzanie czy użytkownik jest zalogowany
// W pełnej implementacji, to będzie korzystać z Astro.locals.session lub podobnego mechanizmu
// Dla teraz używamy prostego sprawdzania ścieżki
const isAuthPage = Astro.url.pathname.startsWith("/auth/");
const isLoggedIn = !isAuthPage; // Tymczasowe - w rzeczywistej implementacji będzie to sprawdzenie sesji

// Mock dla nazwy użytkownika - w rzeczywistej implementacji to będzie pobrane z sesji
const userName = isLoggedIn ? "Użytkownik" : null;
---

<Layout title={title}>
  <main class="min-h-screen bg-background">
    <div class="flex flex-col min-h-screen">
      <header class="border-b bg-card">
        <div class="container flex h-16 items-center px-4 sm:px-6">
          <a href="/" class="font-bold text-xl">10x Cards</a>
          <nav class="ml-auto flex items-center gap-4">
            {
              isLoggedIn && (
                <>
                  <a href="/flashcards" class="hover:text-primary">
                    Fiszki
                  </a>
                  <a href="/generate" class="hover:text-primary">
                    Generowanie
                  </a>
                  <span class="text-sm text-muted-foreground">
                    Zalogowany: <span class="font-medium">{userName}</span>
                  </span>
                  <a href="/auth/login" class="hover:text-primary">
                    Wyloguj
                  </a>
                </>
              )
            }
          </nav>
        </div>
      </header>
      <div class="flex-1">
        <slot />
      </div>
      <footer class="border-t py-4 bg-card">
        <div class="container flex flex-col items-center justify-between gap-4 px-4 text-center sm:px-6 md:flex-row">
          <p class="text-sm text-muted-foreground">
            &copy; {new Date().getFullYear()} 10x Cards. Wszystkie prawa zastrzeżone.
          </p>
        </div>
      </footer>
    </div>
  </main>
</Layout>
